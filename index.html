<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Badminton Game | Made by Younus Rahmatullah</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
    margin: 0;
    background: linear-gradient(#7ec8ff, #ffffff);
    font-family: Arial, sans-serif;
    text-align: center;
}

h2 {
    margin: 8px;
}

canvas {
    background: #2ecc71;
    display: block;
    margin: auto;
    border: 4px solid white;
    border-radius: 12px;
}

button {
    padding: 10px 20px;
    margin: 5px;
    font-size: 16px;
    border-radius: 10px;
    border: none;
    background: #222;
    color: white;
}
</style>
</head>

<body>

<h2>ğŸ¸ Badminton Game</h2>
<p>2 Players â€¢ Mobile Friendly â€¢ Made by Younus</p>

<button onclick="toggleMusic()">ğŸµ Music ON / OFF</button>

<canvas id="game" width="360" height="520"></canvas>

<audio id="hitSound">
  <source src="https://cdn.pixabay.com/audio/2022/03/15/audio_39cfc5f6fa.mp3">
</audio>

<audio id="bgMusic" loop>
  <source src="https://cdn.pixabay.com/audio/2022/10/25/audio_946b8f1f6a.mp3">
</audio>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

const hitSound = document.getElementById("hitSound");
const bgMusic = document.getElementById("bgMusic");

let musicOn = false;

function toggleMusic() {
    if (!musicOn) {
        bgMusic.play();
        musicOn = true;
    } else {
        bgMusic.pause();
        musicOn = false;
    }
}

// Players
let p1 = { x: 140, y: 480, w: 80, h: 10, score: 0 };
let p2 = { x: 140, y: 30,  w: 80, h: 10, score: 0 };

// Shuttle
let shuttle = {
    x: 180,
    y: 260,
    r: 7,
    dx: 2,
    dy: 3
};

// Touch control (Player 1)
canvas.addEventListener("touchmove", e => {
    let rect = canvas.getBoundingClientRect();
    p1.x = e.touches[0].clientX - rect.left - p1.w / 2;
});

// Draw
function drawPlayer(p) {
    ctx.fillStyle = "white";
    ctx.fillRect(p.x, p.y, p.w, p.h);
}

function drawShuttle() {
    ctx.beginPath();
    ctx.arc(shuttle.x, shuttle.y, shuttle.r, 0, Math.PI * 2);
    ctx.fillStyle = "yellow";
    ctx.fill();
}

// Collision
function hit(p) {
    return (
        shuttle.x > p.x &&
        shuttle.x < p.x + p.w &&
        shuttle.y + shuttle.r > p.y &&
        shuttle.y - shuttle.r < p.y + p.h
    );
}

// AI movement
function aiMove() {
    p2.x += (shuttle.x - (p2.x + p2.w / 2)) * 0.05;
}

// Update
function update() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    drawPlayer(p1);
    drawPlayer(p2);
    drawShuttle();

    shuttle.x += shuttle.dx;
    shuttle.y += shuttle.dy;

    aiMove();

    if (shuttle.x < 0 || shuttle.x > canvas.width) shuttle.dx *= -1;

    if (hit(p1)) {
        shuttle.dy = -Math.abs(shuttle.dy);
        hitSound.play();
    }

    if (hit(p2)) {
        shuttle.dy = Math.abs(shuttle.dy);
        hitSound.play();
    }

    if (shuttle.y > canvas.height) {
        p2.score++;
        reset();
    }

    if (shuttle.y < 0) {
        p1.score++;
        reset();
    }

    ctx.fillStyle = "black";
    ctx.font = "16px Arial";
    ctx.fillText("Player: " + p1.score, 10, 20);
    ctx.fillText("Opponent: " + p2.score, 230, 20);

    requestAnimationFrame(update);
}

function reset() {
    shuttle.x = 180;
    shuttle.y = 260;
    shuttle.dy *= -1;
}

update();
</script>

</body>
</html>
